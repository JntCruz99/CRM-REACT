{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Table,Pagination}from'react-bootstrap';import Main from'../components/Main';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const VendasGeral=()=>{const[clientes,setClientes]=useState([]);const[currentPage,setCurrentPage]=useState(0);const[clientesPerPage]=useState(10);const[totalPages,setTotalPages]=useState(0);useEffect(()=>{const token=localStorage.getItem('token');const fetchData=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/clientes/recentes?page=\").concat(currentPage,\"&size=\").concat(clientesPerPage),{headers:{Authorization:\"Bearer \".concat(token)}});setClientes(response.data.content);setTotalPages(response.data.totalPages);}catch(error){alert('Erro ao obter a quantidade de vendas:',error);}};fetchData();},[currentPage,clientesPerPage]);const paginate=pageNumber=>setCurrentPage(pageNumber-1);const renderPageNumbers=()=>{const maxPages=4;const startPage=Math.max(0,currentPage-Math.floor(maxPages/2));const endPage=Math.min(totalPages-1,startPage+maxPages-1);const lastPage=Math.max(0,totalPages-1);return Array.from({length:endPage-startPage+1},(_,index)=>startPage+index+1).map(page=>/*#__PURE__*/_jsx(\"span\",{className:\"page-item \".concat(page-1===currentPage?'active':''),onClick:()=>paginate(page),children:page},page)).concat(endPage!==lastPage?/*#__PURE__*/_jsx(\"span\",{className:\"page-item\",onClick:()=>paginate(endPage+1),children:\"\\xBB\"},\"next\"):null);};return/*#__PURE__*/_jsx(Main,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-2 text-gray-800\",children:\"Tabela Vendas Gerais\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header py-3\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"m-0 font-weight-bold text-success\",children:\"Clientes\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Telefone 1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Telefone 2\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Plataforma\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vendas\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:clientes.map(cliente=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{style:{textTransform:'uppercase'},to:\"/cliente/\".concat(cliente.id),children:cliente.nome})}),/*#__PURE__*/_jsx(\"td\",{children:cliente.numeroTelefone1}),/*#__PURE__*/_jsx(\"td\",{children:cliente.numeroTelefone2}),/*#__PURE__*/_jsx(\"td\",{children:cliente.plataforma}),/*#__PURE__*/_jsx(\"td\",{children:cliente.email}),/*#__PURE__*/_jsx(\"td\",{children:cliente.venda?cliente.venda.length:0}),/*#__PURE__*/_jsx(\"td\",{children:cliente.data?\"\".concat(cliente.data[2],\"/\").concat(cliente.data[1],\"/\").concat(cliente.data[0]):'Data não disponível'})]},cliente.id))})]})}),/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"custom-pagination\",children:renderPageNumbers()}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                                    .custom-pagination .page-item.active {\\n                                        background-color: green;\\n                                        color: white;\\n                                        padding: 6px 12px;  \\n                                        border-radius: 5px;\\n                                        margin: 0 3px;  \\n                                        cursor: pointer;\\n                                    }\\n                                    .custom-pagination .page-item  {\\n                                        background-color: white;\\n                                        color: green;\\n                                        padding: 6px 12px;  \\n                                        border-radius: 5px;\\n                                        margin: 0 3px;  \\n                                        cursor: pointer;\\n                                    }\\n                                    .custom-pagination  {\\n                                        text-align: center;\\n                                    }\\n                                    .pagination {\\n                                        display: block;\\n                                    }\\n                                \"})]})]})]})]})});};export default VendasGeral;","map":{"version":3,"names":["React","useState","useEffect","axios","Table","Pagination","Main","Link","jsx","_jsx","jsxs","_jsxs","VendasGeral","clientes","setClientes","currentPage","setCurrentPage","clientesPerPage","totalPages","setTotalPages","token","localStorage","getItem","fetchData","response","get","concat","process","env","REACT_APP_API_URL","headers","Authorization","data","content","error","alert","paginate","pageNumber","renderPageNumbers","maxPages","startPage","Math","max","floor","endPage","min","lastPage","Array","from","length","_","index","map","page","className","onClick","children","bordered","hover","cliente","style","textTransform","to","id","nome","numeroTelefone1","numeroTelefone2","plataforma","email","venda"],"sources":["C:/Users/JONATA.FESVIP/Desktop/CRM-REACT/src/routes/VendasGeral.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Table, Pagination } from 'react-bootstrap';\r\nimport Main from '../components/Main';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst VendasGeral = () => {\r\n    const [clientes, setClientes] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [clientesPerPage] = useState(10);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await axios.get(`${process.env.REACT_APP_API_URL}/clientes/recentes?page=${currentPage}&size=${clientesPerPage}`, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                });\r\n                setClientes(response.data.content);\r\n                setTotalPages(response.data.totalPages);\r\n            } catch (error) {\r\n                alert('Erro ao obter a quantidade de vendas:', error);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [currentPage, clientesPerPage]);\r\n\r\n    const paginate = (pageNumber) => setCurrentPage(pageNumber - 1);\r\n\r\n    const renderPageNumbers = () => {\r\n        const maxPages = 4;\r\n        const startPage = Math.max(0, currentPage - Math.floor(maxPages / 2));\r\n        const endPage = Math.min(totalPages - 1, startPage + maxPages - 1);\r\n        const lastPage = Math.max(0, totalPages - 1);\r\n\r\n        return Array.from({ length: endPage - startPage + 1 }, (_, index) => startPage + index + 1).map((page) => (\r\n            <span\r\n                key={page}\r\n                className={`page-item ${page - 1 === currentPage ? 'active' : ''}`}\r\n                onClick={() => paginate(page)}\r\n            >\r\n                {page}\r\n            </span>\r\n        )).concat(\r\n            \r\n            endPage !== lastPage ? (\r\n                <span\r\n                    key=\"next\"\r\n                    className=\"page-item\"\r\n                    onClick={() => paginate(endPage + 1)}\r\n                >\r\n                    &raquo;\r\n                </span>\r\n            ) : null\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Main>\r\n            <div className=\"container-fluid\">\r\n                <h1 className=\"h3 mb-2 text-gray-800\">Tabela Vendas Gerais</h1>\r\n\r\n                <div className=\"card shadow mb-4\">\r\n                    <div className=\"card-header py-3\">\r\n                        <h6 className=\"m-0 font-weight-bold text-success\">Clientes</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <div className=\"table-responsive\">\r\n                            <Table bordered hover>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Nome</th>\r\n                                        <th>Telefone 1</th>\r\n                                        <th>Telefone 2</th>\r\n                                        <th>Plataforma</th>\r\n                                        <th>Email</th>\r\n                                        <th>Vendas</th>\r\n                                        <th>Data</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {clientes.map((cliente) => (\r\n                                        \r\n                                        <tr  key={cliente.id}>\r\n                                            <td><Link style={{ textTransform: 'uppercase' }} to={`/cliente/${cliente.id}`}>{cliente.nome}</Link></td>\r\n                                            <td>{cliente.numeroTelefone1}</td>\r\n                                            <td>{cliente.numeroTelefone2}</td>\r\n                                            <td>{cliente.plataforma}</td>\r\n                                            <td>{cliente.email}</td>\r\n                                            <td>{cliente.venda ? cliente.venda.length : 0}</td>\r\n                                            <td>{cliente.data ? `${cliente.data[2]}/${cliente.data[1]}/${cliente.data[0]}` : 'Data não disponível'}</td>\r\n                                        </tr>\r\n                                        \r\n                                    ))}\r\n                                </tbody>\r\n                            </Table>\r\n                        </div>\r\n                        <Pagination>\r\n                            <div className=\"custom-pagination\">\r\n                                {renderPageNumbers()}\r\n                            </div>\r\n                            <style>\r\n                                {`\r\n                                    .custom-pagination .page-item.active {\r\n                                        background-color: green;\r\n                                        color: white;\r\n                                        padding: 6px 12px;  \r\n                                        border-radius: 5px;\r\n                                        margin: 0 3px;  \r\n                                        cursor: pointer;\r\n                                    }\r\n                                    .custom-pagination .page-item  {\r\n                                        background-color: white;\r\n                                        color: green;\r\n                                        padding: 6px 12px;  \r\n                                        border-radius: 5px;\r\n                                        margin: 0 3px;  \r\n                                        cursor: pointer;\r\n                                    }\r\n                                    .custom-pagination  {\r\n                                        text-align: center;\r\n                                    }\r\n                                    .pagination {\r\n                                        display: block;\r\n                                    }\r\n                                `}\r\n                            </style>\r\n                        </Pagination>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Main>\r\n    );\r\n};\r\n\r\nexport default VendasGeral;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}