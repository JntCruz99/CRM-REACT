{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BarraPesquisar=()=>{const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[highlightedIndex,setHighlightedIndex]=useState(-1);const searchResultsRef=useRef(null);const handleSearch=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/clientes/search?searchTerm=\").concat(searchTerm),{headers:{Authorization:\"Bearer \".concat(token)}});setSearchResults(response.data.content);}catch(error){console.error('Erro ao buscar resultados:',error);}};useEffect(()=>{const handleDocumentClick=e=>{if(searchResultsRef.current&&!searchResultsRef.current.contains(e.target)){setSearchResults([]);}};document.addEventListener('click',handleDocumentClick);return()=>{document.removeEventListener('click',handleDocumentClick);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",ref:searchResultsRef,children:[/*#__PURE__*/_jsx(\"form\",{className:\"d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 small\",placeholder:\"Pesquisar...\",\"aria-label\":\"Pesquisar...\",\"aria-describedby\":\"basic-addon2\",value:searchTerm,onChange:e=>{setSearchTerm(e.target.value);handleSearch();}}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"button\",style:{backgroundColor:'green',color:'white'},onClick:handleSearch,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search fa-sm\"})})})]})}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results position-absolute border rounded p-2 mt-1\",style:{zIndex:100,backgroundColor:'white',cursor:'pointer',width:'360px',marginLeft:'16px'},children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled m-0\",children:searchResults.map((result,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"border-bottom py-1 \".concat(highlightedIndex===index?'bg-light':''),onMouseEnter:()=>setHighlightedIndex(index),onMouseLeave:()=>setHighlightedIndex(-1),children:/*#__PURE__*/_jsxs(Link,{to:\"/cliente/\".concat(result.id),children:[result.nome,\" ; \",/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'10px'},children:[\"Tel:\",result.numeroTelefone1]})]})},result.id))})})]});};export default BarraPesquisar;","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","Link","jsx","_jsx","jsxs","_jsxs","BarraPesquisar","searchTerm","setSearchTerm","searchResults","setSearchResults","highlightedIndex","setHighlightedIndex","searchResultsRef","handleSearch","token","localStorage","getItem","response","get","concat","process","env","REACT_APP_API_URL","headers","Authorization","data","content","error","console","handleDocumentClick","e","current","contains","target","document","addEventListener","removeEventListener","className","ref","children","type","placeholder","value","onChange","style","backgroundColor","color","onClick","length","zIndex","cursor","width","marginLeft","map","result","index","onMouseEnter","onMouseLeave","to","id","nome","fontSize","numeroTelefone1"],"sources":["C:/Users/JONATA.FESVIP/Desktop/CRM-REACT/src/components/BarraPesquisar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst BarraPesquisar = () => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [highlightedIndex, setHighlightedIndex] = useState(-1);\r\n    const searchResultsRef = useRef(null);\r\n\r\n    const handleSearch = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get(`${process.env.REACT_APP_API_URL}/clientes/search?searchTerm=${searchTerm}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n\r\n            setSearchResults(response.data.content);\r\n        } catch (error) {\r\n            console.error('Erro ao buscar resultados:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleDocumentClick = (e) => {\r\n            if (searchResultsRef.current && !searchResultsRef.current.contains(e.target)) {\r\n                setSearchResults([]);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('click', handleDocumentClick);\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleDocumentClick);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"position-relative\" ref={searchResultsRef}>\r\n            <form className=\"d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search\">\r\n                <div className=\"input-group\">\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"form-control bg-light border-0 small\"\r\n                        placeholder=\"Pesquisar...\"\r\n                        aria-label=\"Pesquisar...\"\r\n                        aria-describedby=\"basic-addon2\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => {\r\n                            setSearchTerm(e.target.value);\r\n                            handleSearch();\r\n                        }}\r\n                    />\r\n                    <div className=\"input-group-append\">\r\n                        <button\r\n                            className=\"btn btn-success\"\r\n                            type=\"button\"\r\n                            style={{ backgroundColor: 'green', color: 'white' }}\r\n                            onClick={handleSearch}\r\n                        >\r\n                            <i className=\"fas fa-search fa-sm\"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n\r\n            {searchResults.length > 0 && (\r\n                <div className=\"search-results position-absolute border rounded p-2 mt-1\" style={{ zIndex: 100, backgroundColor: 'white', cursor: 'pointer', width: '360px', marginLeft: '16px' }}>\r\n                    <ul className=\"list-unstyled m-0\">\r\n                        {searchResults.map((result, index) => (\r\n                            <li\r\n                                key={result.id}\r\n                                className={`border-bottom py-1 ${highlightedIndex === index ? 'bg-light' : ''}`}\r\n                                onMouseEnter={() => setHighlightedIndex(index)}\r\n                                onMouseLeave={() => setHighlightedIndex(-1)}\r\n                            >\r\n                                <Link to={`/cliente/${result.id}`}>\r\n                                    {result.nome} ; <span style={{ fontSize: '10px' }}>Tel:{result.numeroTelefone1}</span>\r\n                                </Link>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BarraPesquisar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}